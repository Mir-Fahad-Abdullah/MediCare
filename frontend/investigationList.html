<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/investigation.css">
    <title>MediCareMate</title>
</head>
<body>
    <div class="navbar-box">
        <div class="home-details">
            <div class="logo">
                <h2 class="logo">MediCareMate</h2>
            </div>
            <div class="menu">
                <ul>
                    <li><a href="#">HOME</a></li>
                    <li><a href="#">Hospitals</a></li>
                    <li><a href="#">logout</a></li>
                </ul>
            </div>
        </div>
        <div class="login-images">
            <img src='css/images/default.jpg' alt="Default Image" id="loginImage">
        </div>
    </div>
    <main class="table" id="investigation_table">
        <section class="table__header">
            <h1>Investigation List</h1>
            <div class="input-group">
                <input type="search" placeholder="Search Data...">
                <img src='css/images/search.png' alt="Search Icon">
            </div>
        </section>
        <section class="table__body">
            <div class="scrollable-table">
                <table>
                    <thead>
                        <tr>
                            <th> Name <span class="icon-arrow">&UpArrow;</span></th>
                            <th> Amount <span class="icon-arrow">&UpArrow;</span></th>
                            <th> Book Now <span class="icon-arrow">&UpArrow;</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td> Blood Test </td>
                            <td><strong> 300 BDT </strong></td>
                            <td>
                                <button class="booking" onclick="bookTest('Blood Test', 300)">Book</button>
                            </td>
                        </tr>
                        <tr>
                            <td> CT scan </td>
                            <td><strong> 1000 BDT </strong></td>
                            <td>
                                <button class="booking" onclick="bookTest('CT scan', 1000)">Book</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Endoscopy</td>
                            <td><strong> 1200 BDT </strong></td>
                            <td>
                                <button class="booking" onclick="bookTest('Endoscopy', 1200)">Book</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Ultrasonography</td>
                            <td><strong> 1400 BDT </strong></td>
                            <td>
                                <button class="booking" onclick="bookTest('Ultrasonography', 1400)">Book</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>
    <script>
        function bookTest(testName, price) {
            const bookingUrl = `booking.html?test=${encodeURIComponent(testName)}&price=${price}`;
            window.location.href = bookingUrl;
        }
        document.addEventListener('DOMContentLoaded', async () => { 

const response = await fetch('/api/investigation/list'); 

const investigations = await response.json(); 



const investigationList = document.getElementById('investigationList'); 

investigations.forEach(investigation => { 

    investigationList.innerHTML += ` 

        <div> 

            <h2>${investigation.testName}</h2> 

            <p>Hospital: ${investigation.hospitalName}</p> 

            <p>Price: ${investigation.price}</p> 

        </div> 

    `; 

}); 

}); 
    </script>
</body>
</html>
